@model IEnumerable<Bán_hàng.Areas.Admin.Models.SanPham>

@{
    ViewData["Title"] = "Trang chu";
    Layout = "~/Views/Shared/_NguoiDungLayout.cshtml";
}
<script src="~/lib/jquery/dist/jquery.js"></script>
<input class="my-4 ml-4" id="TuKhoa" placeholder="Tìm gì?" />
<button id="Seach" class="btn btn-primary">Seach</button>


<div class="mb-4" id="ketqua"></div>
<div class="container text-center">
    <div class="btn btn-primary ml-4 mb-5" id="LoadMore">Tải thêm</div>
</div>

<script>
    $(document).ready(function () {
        $("#TuKhoa").keyup(function () {
            $("#default").html("");
            $.ajax({
                url: "/NguoiDung/Search",
                type: "post",
                data: {
                    "Keyword": $('#TuKhoa').val().trim()
                },
                success: function (data) {
                    if (data == "fales") {
                        return false;
                    }
                    $("#ketqua").html(data);
                }
            });
        });

        var page = 1;
        var tongSoTrang = parseInt(@ViewBag.TongSoTrang);
        function loadMore() {
            $.ajax({
                url: "/NguoiDung/LoadMore",
                method: "post",
                data: {
                    Page: page
                },
                success: function (data) {
                    $("#ketqua").append(data);
                    if (page < tongSoTrang) {
                        $("#LoadMore").show();
                    }
                    else {
                        $("#LoadMore").hide();
                    }

                }
            });
        }
        $("#LoadMore").click(function () {
            if (page < tongSoTrang) {
                page++;
                loadMore();
            }
        });
        loadMore();
    });

</script>
