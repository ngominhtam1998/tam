@model IEnumerable<Bán_hàng.Areas.Admin.Models.SanPham>

@{
    ViewData["Title"] = "Trang chu";
    Layout = "~/Views/Shared/_NguoiDungLayout.cshtml";
}
<script src="~/lib/jquery/dist/jquery.js"></script>
<input class="my-4 ml-4" id="TuKhoa" placeholder="Tìm gì?" />
<button id="Seach" class="btn btn-primary">Seach</button>

@*<div id="default">
    <form>
        <div class="container abc">
            <div class="row abc">
                @foreach (var item in Model)
                {
                    <div class="col-sm-3 col-md-3">
                        <div class="card">
                            <img class="card-img-top" src="~/ADMIN/Images/@item.Hinh" />
                            <div class="card-body">
                                <h3 class="card-title">@item.Tensp</h3>
                                <p class="card-text">@item.Dongia đ</p>
                                <button asp-action="ViewBuy" class="btn btn-success btn-block">Mua ngay</button>
                                <button asp-action="Items" asp-route-ID="@item.Masp" class="btn btn-secondary btn-block">Thêm vào giỏ hàng</button>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </form>
</div>*@

<div class="mb-4" id="ketqua"></div>
<div class="container text-center">
    <div class="btn btn-primary ml-4 mb-5" id="LoadMore">Tải thêm</div>
</div>

<script>
    $(document).ready(function () {
        $("#Seach").click(function () {
            $("#default").html("");
            $.ajax({
                url: "/NguoiDung/Search",
                type: "post",
                data: {
                    "Keyword": $('#TuKhoa').val().trim()
                },
                success: function (data) {
                    $("#ketqua").html(data);
                }
            });
        });

        var page = 1;
        var tongSoTrang = parseInt(@ViewBag.TongSoTrang);
        function loadMore() {
            $.ajax({
                url: "/NguoiDung/LoadMore",
                method: "post",
                data: {
                    Page: page
                },
                success: function (data) {
                    $("#ketqua").append(data);
                    if (page < tongSoTrang) {
                        $("#LoadMore").show();
                    }
                    else {
                        $("#LoadMore").hide();
                    }

                }
            });
        }
        $("#LoadMore").click(function () {
            if (page < tongSoTrang) {
                page++;
                loadMore();
            }
        });
        loadMore();
    });

</script>
